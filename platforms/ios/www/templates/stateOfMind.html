<ion-view title="State" ng-init="getStateofMindData()">
  <ion-header-bar class="bar-header custom-header">
    <h1 class="title">State</h1>
    <i class="button button-clear ion-gear-b settingsBtn" ui-sref="settings({pageId:4})"></i>
  </ion-header-bar>
	<ion-header-bar class="bar-subheader">
    <div class="fixedBtnDiv1">
    	<span class="clientName1 capitalize">{{user_name}} <span class="patientName capitalize">{{patient_name}}</span></span>
    </div>
  </ion-header-bar>
  <ion-content has-header="true" has-tabs="true" ng-show="NoDataAvailable">
    <div class="containerWrapper">
      <div class="topDiv">
        <p>{{noDataMessage}}</p>
      </div>
    </div>
  </ion-content>
  <ion-content has-header="true" has-tabs="true" ng-show="DataAvailable">
    <div class="containerWrapper">
    	<div class="topDiv" ng-show="showAppointmentDiv">
      	<span class="nextApptText">Next Appt</span>
    	 	<span class="datetimeText">{{nextApptDateTime}}</span>
    	</div>
      <div class="main-session-para" ng-show="showDailyMetricDiv">
      	<div class="sessionpara">
        	<span class="nextsessionText">Next session goals</span>
      	 	<span class="yesDayText">Yes/Days</span>
      	</div>
      	<div class="sessionpara" ng-repeat="sessionGoals in dailyMetricData">
      		<div class="sesssionText1">{{$index +  1}} . {{sessionGoals.goal_question}}</div>
      		<div class="percentageSpan" ng-class="{greenDiv : ((CheckInDailyMetricData[sessionGoals.goal_id] / totalDays)*100) > 79, redDiv : ((CheckInDailyMetricData[sessionGoals.goal_id] / totalDays)*100) < 21, yellowDiv : ((CheckInDailyMetricData[sessionGoals.goal_id] / totalDays)*100) > 21 && ((CheckInDailyMetricData[sessionGoals.goal_id] / totalDays)*100) < 79}">{{Math.round((CheckInDailyMetricData[sessionGoals.goal_id] / totalDays)*100) }}%</div>
      		<div class="yesDayText1">
            {{CheckInDailyMetricData[sessionGoals.goal_id]}} / {{totalDays}}
          </div>
      	</div>
      </div>
      <div class="chartDiv" ng-show="showDailyMetricCharts">
          <div class="card">
            <div class="item item-divider">
                Daily Metrics - {{User_Type}}
            </div>
            <div class="item item-text-wrap">
                <canvas id="line" class="chart chart-line" chart-data="FirstChartData" chart-labels="chartlabels" chart-legend="true" chart-series="firstchartseries" chart-options="{showTooltips: true}"></canvas>
            </div>
          </div>
      </div>
      <div class="chartDiv" ng-show="showDailyMetricCharts">
          <div class="card">
            <div class="item item-divider">
                Daily Metrics - {{User_Type}} 
            </div>
            <div class="item item-text-wrap">
                <canvas id="line" class="chart chart-line" chart-data="SecondChartData" chart-labels="chartlabels" chart-legend="true" chart-series="secondchartseries" chart-options="{showTooltips: true}"></canvas>
            </div>
          </div>
      </div>
      <div class="chartDiv" ng-show="showWeeklyMetricDiv">
          <div class="card">
            <div class="item item-divider">
                Weekly Metrics - {{User_Type}}
            </div>
            <div class="item item-text-wrap">
                <canvas id="line" class="chart chart-line" chart-data="WeeklyChartData" chart-labels="chartlabels" chart-legend="true" chart-series="weeklyChartSeries" chart-options="{showTooltips: true}"></canvas>
            </div>
          </div>
      </div>
    </div>
  </ion-content>
</ion-view>